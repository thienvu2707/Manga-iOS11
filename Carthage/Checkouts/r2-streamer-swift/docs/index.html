<!DOCTYPE html>
<html lang="en">
  <head>
    <title>R2Streamer  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="R2Streamer  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">R2Streamer Docs</a> (67% documented)</p>
        <p class="header-right"><a href="https://github.com/readium/r2-streamer-swift"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">R2Streamer Reference</a>
        <img id="carat" src="img/carat.png" />
        R2Streamer  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/CbzParser.html">CbzParser</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ContainerCbz.html">ContainerCbz</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ContainerCbzDirectory.html">ContainerCbzDirectory</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ContainerEpub.html">ContainerEpub</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ContainerEpubDirectory.html">ContainerEpubDirectory</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:C10R2Streamer16EncryptionParser">EncryptionParser</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/EpubParser.html">EpubParser</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Logger.html">Logger</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/LoggerStub.html">LoggerStub</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:C10R2Streamer14MetadataParser">MetadataParser</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:C10R2Streamer9NCXParser">NCXParser</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:C10R2Streamer24NavigationDocumentParser">NavigationDocumentParser</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:C10R2Streamer9OPFParser">OPFParser</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PublicationServer.html">PublicationServer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SeekableInputStream.html">SeekableInputStream</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/WebServerResourceResponse.html">WebServerResourceResponse</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/CbzParserError.html">CbzParserError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ContainerError.html">ContainerError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/EpubParserError.html">EpubParserError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/FetcherError.html">FetcherError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/FileInputStreamError.html">FileInputStreamError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/MediaType.html">MediaType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/PublicationServerError.html">PublicationServerError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/SeekWhence.html">SeekWhence</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/SeverityLevel.html">SeverityLevel</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/WebServerResponseError.html">WebServerResponseError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/DirectoryContainer.html">DirectoryContainer</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/EpubContainer.html">EpubContainer</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/ZipArchiveContainer.html">ZipArchiveContainer</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Functions.html#/s:F10R2Streamer19R2StreamerEnableLogFT24withMinimumSeverityLevelOS_13SeverityLevel12customLoggerPS_10LoggerType__T_">R2StreamerEnableLog(withMinimumSeverityLevel:customLogger:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/Container.html">Container</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Loggable.html">Loggable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/LoggerType.html">LoggerType</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Seekable.html">Seekable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/CbzConstant.html">CbzConstant</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EpubConstant.html">EpubConstant</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs.html#/s:V10R2Streamer11ZipFileInfo">ZipFileInfo</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Typealiases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:10R2Streamer6PubBox">PubBox</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p><a href="https://opensource.org/licenses/BSD-3-Clause"><img src="https://img.shields.io/badge/License-BSD--3-brightgreen.svg" alt="BSD-3"></a>
<a href="https://codebeat.co/projects/github-com-readium-r2-streamer-swift-master"><img src="https://codebeat.co/badges/09d7d037-b6f6-4945-9808-c0bc02b8c36d" alt="codebeat badge"></a>
<a href="https://github.com/Carthage/Carthage"><img src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat" alt="Carthage compatible"></a>
<a href="https://readium.github.io/r2-streamer-swift/"><img src="https://img.shields.io/badge/Jazzy--Documentation-63%25-lightgrey.svg" alt="JazzyDocumentation"></a></p>

<p>R2-streamer-swift aims at simplifying the usage of numeric publication by parsing and serving them.
It takes the publication as input, and generates an accessible <a href="https://github.com/readium/webpub-manifest">WebPubManifest</a>/object as output.</p>

<p>The project documentation is available <a href="https://readium.github.io/r2-streamer-swift/">here</a></p>
<h1 id='get-started' class='heading'>Get started</h1>
<h2 id='adding-the-library-to-your-ios-project' class='heading'>Adding the library to your iOS project</h2>
<h5 id='carthage' class='heading'>Carthage</h5>

<p>Add the following line to your Cartfile</p>

<p><code>github &quot;readium/r2-streamer-swift&quot; &quot;master&quot;</code></p>

<p>Then run <code>carthage update --platform ios</code> to fetch and build the dependencies.</p>
<h5 id='cocoapods' class='heading'>CocoaPods</h5>

<p>//Todo</p>
<h5 id='import' class='heading'>Import</h5>

<p>In your Swift files :</p>
<pre class="highlight plaintext"><code>// Swift source file

import R2Streamer
</code></pre>
<h1 id='parsing-publications' class='heading'>Parsing publications</h1>
<h5 id='epub' class='heading'>EPUB</h5>

<p><code>let parser = EpubParser()</code></p>
<h5 id='cbz' class='heading'>CBZ</h5>

<p><code>let parser = CbzParser()</code></p>
<h5 id='parsing' class='heading'>Parsing</h5>
<pre class="highlight plaintext"><code>...
var parseResult: PubBox

do {
    parseResult = try parser.parse(fileAtPath: path)
} catch {
    // `{Type}ParserError` exception handling
}

/// Get `Publication` from the `parseResult`
let publication = parseResult.publication

/// Access `Publication` content
let metadata = publication.metadata
let tableOfContent = publication.tableOfContent
let spineItems = publication.spine
//...
</code></pre>

<p>You can now access your publications content programmatically. The <code>Publication</code> object is described in details <a href="https://readium.github.io/r2-streamer-swift/Classes/Publication.html">here</a>.</p>
<h1 id='built-in-http-server' class='heading'>Built in HTTP server</h1>
<h5 id='initializing-the-server' class='heading'>Initializing the server</h5>

<p>R2Streamer provides a local HTTP server called <code>PublicationSever</code>, this allow access to the resources of the <code>Publication</code>.</p>
<pre class="highlight plaintext"><code>/// Instantiation of the HTTP server
guard let publicationServer = PublicationServer() else {
    // Error
}
</code></pre>
<h5 id='adding-publications-to-the-server' class='heading'>Adding publications to the server</h5>

<p>You can add your parsed publication to the server at the desired endpoints. (The endpoint parameter is optional, an <code>UUID</code> will be generated if let empty as below)</p>
<pre class="highlight plaintext"><code>/// Adding a publication to the server (Using the above section variables)
do {
    try publicationServer.add(publication, with: container/* ,"customEndpoint" */)
} catch {
    // `PublicationServerError` exception handling
}
</code></pre>

<p>When a Publication is added to the server, a new &lsquo;self&rsquo; <code>Link</code> is added to the <code>Publication</code>&lsquo;s <code>links</code> property.
The <code>Publication</code> now know how to locate its resources over HTTP. See below for an example.</p>
<h5 id='accessing-a-code-link-code-resource-from-the-server' class='heading'>Accessing a <code>Link</code> resource from the server</h5>

<p>The <code>Publication</code> is described using <code>Link</code>s. Each link describe a resource from the publication in a Publication-relative way.</p>
<pre class="highlight plaintext"><code>/// Accessing any `Link` resource over HTTP
let cover = publication.coverLink // Or `spineItems[x]`...

let coverUri = publication.uri(forLink: cover)
print(coverUri) // "http://{serverip}:{serverport}/{endpoint}/{`cover.href`}"
</code></pre>
<h5 id='removing-a-publication-from-the-server' class='heading'>Removing a publication from the server</h5>

<p>Using the <code>Publication</code> itself:</p>

<p><code>publicationServer.remove(publication)</code></p>

<p>Or it&rsquo;s endpoint:</p>

<p><code>publicationServer.remove(at: &quot;endpoint&quot;)</code></p>
<h1 id='webpub-manifest' class='heading'>WebPub Manifest</h1>

<p>For further informations see <a href="https://github.com/readium/webpub-manifest">readium/webpub-manifest</a>.</p>
<h5 id='pretty' class='heading'>Pretty</h5>

<p><code>publication.manifest()</code></p>
<h5 id='canonical' class='heading'>Canonical</h5>

<p><code>publication.manifestCanonical()</code></p>

<hr>

<p>Supported formats: </p>

<p><strong>EPUB 2/3/3.1- OEBPS - CBZ</strong></p>
<h2 id='dependencies' class='heading'>Dependencies</h2>

<p>The project dependencies are managed with <a href="https://github.com/Carthage/Carthage">Carthage</a>.
Run carthage update &ndash;platform ios to fetch and build the dependencies:</p>

<ul>
<li><a href="https://github.com/readium/r2-shared-swift">r2-shared-swift</a> : Contains the definitions of shared custom types used across the readium-2 Swift projects.</li>
<li><a href="https://github.com/swisspol/GCDWebServer">swisspol/GCDWebServer</a> A modern and lightweight GCD based HTTP 1.1 server designed to be embedded in OS X &amp; iOS apps.</li>
<li><a href="https://github.com/tadija/AEXML">tadija/AEXML</a> Simple and lightweight XML parser written in Swift.</li>
<li><a href="https://github.com/krzyzanowskim/CryptoSwift">krzyzanowskim/CryptoSwift</a> Crypto related functions and helpers for Swift implemented in Swift.</li>
</ul>
<h2 id='documentation' class='heading'>Documentation</h2>

<p><a href="https://github.com/realm/jazzy">Jazzy</a> is used to generate the project documentation.
There are two script for building either the Public API documentation of the full documentation.</p>

<p>   <code>./generate_doc_public.sh</code>
    <code>./generate_doc_full.sh</code></p>

<p>The project documentation is available <a href="https://readium.github.io/r2-streamer-swift/">here</a></p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2017 <a class="link" href="http://readium.github.io/" target="_blank" rel="external">Readium</a>. All rights reserved. (Last updated: 2017-08-24)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.8.2</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
